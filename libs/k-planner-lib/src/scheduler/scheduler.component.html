<div class="control-section" >
    <div class="drag-sample-wrapper">
        <div class="schedule-container">
            <div class="title-container">
            </div>
             <button  #toggleBtn ejs-button id="btn"  (click)="displayRegies()"  class=" btn btn-outline-dark regie" style="padding:0" iconCss="e-btn-sb-icons e-play-icon">
            </button> 
            <ejs-schedule #scheduleObj 
                locale="fr-CH"
                (eventClick)="onEventClick()"
                (popupOpen)="onPopupOpen($event)" 
                cssClass='schedule-drag-drop' 
                width='100%'
                height='650px' 
                [group]="group" 
                [currentView]="currentView" 
                [selectedDate]="selectedDate" 
                [workHours]="workHours"
                [eventSettings]="eventSettings" 
                (actionBegin)="onActionBegin($event)" 
                (actionComplete)="onActionComplete($event)"
                (drag)="onItemDrag($event)"
                (eventRendered)="onEventRendered($event)"
                [startHour]="startHour" 
                [endHour]="endHour"
                (navigating)="onNavigating($event)"
                >
                <!-- (renderCell)="onRenderCell($event)" -->
                <e-resources>
                    <e-resource 
                        field='DepartmentID' 
                        title='Regie'
                        name='Departments' 
                        [dataSource]='departmentDataSource'
                        textField='Text' 
                        idField='Id' 
                        colorField='Color' 
                        groupIDField="Id" 
                        [allowMultiple]='allowMultiple'>
                    </e-resource>
                </e-resources>                
                <!-- <ng-template #resourceHeaderTemplate let-data>
                            <div class="template-wrap">
                                <div class="specialist-category">
                                    <div *ngIf="getConsultantStatus(data)">
                                        <img src="https://ej2.syncfusion.com/angular/demos/src/schedule/images/{{getConsultantImageName(data)}}.png" class="specialist-image" />
                                    </div>
                                    <div class="specialist-name">{{getConsultantName(data)}}</div>
                                </div>
                            </div>
                        </ng-template > -->
                <e-views>
                        
                    <e-view option='TimelineDay' [timeScale]="{ enable: true }" >
                        <ng-template #eventTemplate let-data  class="event">
                            <div class='template-wrap' style="width: 100%" id="{{data.Id}}" [ngStyle]="data.AzaIsPere ? { 'cursor': 'pointer'} : {}" >
                                <div>
                                    <div class="subject" style="margin-top: 0px;" *ngIf="data.AzaIsPere" id="{{data.Id}}">
                                        <div class="float-right fixed initiales"><p>{{data.coordinateurCreate}}</p></div>
                                        <u id="{{data.Id}}">{{data.Name }} </u> 
                                        <!-- <img *ngIf="data.IconUrl" style="height: 20px; width: 20px;" src="{{data.IconUrl}}" /> -->
                                        <div *ngIf="data.Operateur" class="float-right mt-1 operateur">{{data.Operateur}}</div>
                                        <!-- <img style="height: 30px; width: 30px; margin: 0px" src="https://cdn.iconscout.com/icon/free/png-256/avatar-372-456324.png"
                                            class="float-right  fixed mr-1"> -->
                                    </div>
                                    <div *ngIf="!data.AzaIsPere" class="show-user" style="height: 40px; width: 100%; position: absolute; bottom: 0; color: white; display: flex;">
                                        <span style="padding-top: 5px; width: 100%; z-index: 2 !important">{{data.Name }} </span>
                                    </div>
                                </div>
                            </div>
                        </ng-template>
                    </e-view>
                    <e-view option="TimelineWeek" [timeScale]="{enable: true, interval: 60, slotCount: 1}" >
                            <ng-template #eventTemplate let-data  class="event">
                                    <div class='template-wrap' style="width: 100%" id="{{data.Id}}" [ngStyle]="data.AzaIsPere ? { 'cursor': 'pointer'} : {}" >
                                        <div>
                                            <div class="subject" style="margin-top: 0px;" *ngIf="data.AzaIsPere" id="{{data.Id}}">
                                                <div class="float-right fixed initiales"><p>{{data.coordinateurCreate}}</p></div>
                                                <u id="{{data.Id}}">{{data.Name }} </u> 
                                                <!-- <img *ngIf="data.IconUrl" style="height: 20px; width: 20px;" src="{{data.IconUrl}}" /> -->
                                                <div *ngIf="data.Operateur" class="float-right mt-1 operateur">{{data.Operateur}}</div>
                                                <!-- <img style="height: 30px; width: 30px; margin: 0px" src="https://cdn.iconscout.com/icon/free/png-256/avatar-372-456324.png"
                                                    class="float-right  fixed mr-1"> -->
                                            </div>
                                            <div *ngIf="!data.AzaIsPere" class="show-user" style="height: 40px; width: 100%; position: absolute; bottom: 0; color: white; display: flex;">
                                                <span style="padding-top: 5px; width: 100%; z-index: 2 !important">{{data.Name }} </span>
                                            </div>
                                        </div>
                                    </div>
                                </ng-template>
                    </e-view>
                    <e-view option='TimelineMonth'  [readonly]="readonly">
                            <ng-template #eventTemplate let-data  class="event">
                                    <div class='template-wrap' style="width: 100%" id="{{data.Id}}">
                                        <div>
                                            <div class="subject" style="margin-top: 0px;" *ngIf="data.AzaIsPere" id="{{data.Id}}">
                                                <div class="float-right fixed initiales"><p>{{data.coordinateurCreate}}</p></div>
                                                <u id="{{data.Id}}">{{data.Name }} </u> 
                                                <div *ngIf="data.Operateur" class="float-right mt-1 operateur">{{data.Operateur}}</div>
                                            
                                              
                                            </div> 
                                            <div *ngIf="!data.AzaIsPere" class="show-user" style="height: 40px; width: 100%; position: absolute; bottom: 0; color: white; display: flex;">
                                                <span style="padding-top: 5px; width: 100%; z-index: 2 !important">{{data.Name }} </span>
                                            </div>
                                      </div> 
                                    </div>
                                </ng-template> 

                    </e-view>
                    <e-view option="Agenda"  [readonly]="readonly"  ></e-view>
                    <e-view option="MonthAgenda" >
                    </e-view>
                </e-views>
                <!-- Editor Template-->
                <!-- <ng-template #editorTemplate>
                    <table class="custom-event-editor" width="100%" cellpadding="5">
                        <tbody>
                            <tr>
                                <td class="e-textlabel">Summary</td>
                                <td colspan="4">
                                    <input id="Subject" class="e-field e-input" type="text" value="" name="Subject" style="width: 100%" />
                                </td>
                            </tr>
                            <tr>
                                <td class="e-textlabel">Status</td>
                                <td colspan="4">
                                    <input type="text" id="EventType" name="EventType" class="e-field" style="width: 100%" />
                                </td>
                            </tr>
                            <tr>
                                <td class="e-textlabel">From</td>
                                <td colspan="4">
                                    <input id="StartTime" class="e-field" type="text" name="StartTime" />
                                </td>
                            </tr>
                            <tr>
                                <td class="e-textlabel">To</td>
                                <td colspan="4">
                                    <input id="EndTime" class="e-field" type="text" name="EndTime" />
                                </td>
                            </tr>
                            <tr>
                                <td class="e-textlabel">Reason</td>
                                <td colspan="4">
                                    <textarea id="Description" class="e-field e-input" name="Description" rows="3" cols="50" style="width: 100%; height: 60px !important; resize: vertical"></textarea>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </ng-template> -->
                <!--****************-->
            </ejs-schedule>
        </div>
   
        <ejs-tab id="element" #element *ngIf="scheduleObj.currentView =='TimelineDay'  || scheduleObj.currentView =='TimelineWeek'" >
            <e-tabitems>
                <e-tabitem [header]='headerText[0]' id="{{headerText[0]}}" (click)="alert('ok')">
                    <ng-template #content>
                        <div class="treeview-container">
                            <div class="title-container">
                            </div>
                            <div class="input-group">
                                <input type="text" class="form-control" placeholder="Filtrer..." #search (keyup)="onFilter(search.value,0)" >
                                <span class="input-group-addon" id="basic-addon1"><i class="icofont icofont-search"></i></span>
                            </div>
                            <ejs-treeview 
                                #treeObj 
                                [fields]='field' 
                                cssClass='treeview-external-drag'
                                [allowDragAndDrop]='allowDragAndDrop'
                                (nodeDragStop)="onTreeDragStop($event)" 
                                (nodeDragging)="onItemDrag($event, 0)">
                                <ng-template #nodeTemplate="" let-dataWorkOrder="">
                                    <div id="waiting">
                                        <div id="waitdetails" >
                                            <div id="waitlist">{{dataWorkOrder.Name }}</div>
                                            <div id="waitcategory">{{dataWorkOrder.Description}}</div>
                                        </div>
                                    </div>
                                </ng-template>
                            </ejs-treeview>
                        </div>
                    </ng-template>
                </e-tabitem>
                <e-tabitem [header]='headerText[1]'>
                    <ng-template #content>
                        <div class="treeview-container">
                            <div class="title-container">
                            </div>
                            <div class="input-group">
                                <input type="text" class="form-control" placeholder="Filtrer..."  #search   [(ngModel)]="search.value"  (keyup)="onFilter(search.value,1)"  >
                                <span class="input-group-addon" id="basic-addon1"><i class="icofont icofont-search"></i></span>
                            </div>
                            <select class="form-control " ([ngModel])="selectedValue"  #select (change)="onSelect(select.value)">
                                <option >Plus de monteurs </option>
                                <option *ngFor="let liste of monteurListe"  >{{liste.Username}}</option>
                            </select>
                            <div>
                                <ejs-treeview *ngIf="selectedValue!='Plus de monteurs'"
                                    id="treeMonteur"
                                    #treeObjMonteur 
                                    [fields]='fieldMonteur' 
                                    cssClass='treeview-external-drag'
                                    [allowDragAndDrop]='allowDragAndDrop'  
                                    (nodeDragStop)="onTreeDragStopMonteur($event)"   
                                    (nodeDragging)="onItemDrag($event, 1)">
                                    <ng-template #nodeTemplate="" #selectedNodes="" let-dataMon="" >
                                        <!-- let-dataMonteur="" -->
                                   <div id="waiting" [ngStyle]="{'border':getBorder(dataMon.Username)}">
                                        <div id="waitdetails" class="monteurs">
                                            <br>
                                            <div id={{dataMon.CodeRessource}} class=" {{dataMon.Username}} ml-2" >{{dataMon.Username}}  </div>
                                        </div>
                                    </div>
                                </ng-template> 
                            </ejs-treeview>
                        </div>
                        <ejs-contextmenu
                        id='contentmenutree'
                         target='#treeMonteur'
                          [items]='menuItems' 
                          (beforeOpen)='beforeopen($event)' 
                          (select)='menuclick($event)'>
                        </ejs-contextmenu>
                        </div>
                    </ng-template>
                </e-tabitem> 
            </e-tabitems>
        </ejs-tab>
    </div>
</div>
