
<div class="control-section" >
   

            <table class="table-light table-sm" id="property" title="Properties" style="width: 100%" *ngIf="scheduleObj.currentView =='TimelineWeek' || scheduleObj.currentView =='TimelineDay' ">
                <tbody>
                    <tr style="height: 50px">
                        <td style="width: 5%">
                            <div style="text-align:center"> Intervalle  (Minutes)</div>
                            
                        </td>
                         <td >
                            <div>
                                <ejs-dropdownlist style="width: 10%"  [dataSource]='intervalData' [value]='intervalValue' (change)='changeInterval($event)' popupHeight="200px"></ejs-dropdownlist>
                            </div>
                        </td>
                       <!-- <td style="width: 10%" >
                            <div style="text-align:center" > Heur DÃ©but
                            </div>
                        </td>
                        <td style="width: 10%;" >
                            <div>
                                <ejs-timepicker #ejStartTimePicker id="startTime"  format='HH:mm' [strictMode]='isStrictMode' ></ejs-timepicker>
                            </div>
                        </td>
                
                        <td style="width: 10%" >
                            <div style="text-align:center">Heur Fin
                            </div>
                        </td>
                        <td style="width: 10%;">
                            <div>
                                <ejs-timepicker #ejEndTimePicker id="endTime" format='HH:mm' [strictMode]='isStrictMode'></ejs-timepicker>
                            </div>
                        </td>
                   
                        <td>
                            <div>
                                <button ejs-button id='submit' class="ml-3" style="text-align:center" (click)="onSubmit()">Valider</button>
                            </div>
                        </td> -->
                    </tr>
                </tbody>
            </table>
    <div class="drag-sample-wrapper">
        <div class="schedule-container">
            <div class="title-container">
                   
                     
            </div>
          
            <button #toggleBtn ejs-button id="btn" (click)="displayRegies()" class="btn btn-info btn-outline-dark regie ml-3"></button> 
           
            <ejs-schedule #scheduleObj 
                locale="fr-CH"
                (eventClick)="onEventClick()"
                (popupOpen)="onPopupOpen($event)" 
                cssClass='schedule-drag-drop' 
                width='100%'
                height='810px' 
                [group]="group" 
                [currentView]="currentView" 
                [selectedDate]="selectedDate" 
                [workHours]="workHours"
                [eventSettings]="eventSettings" 
                (actionBegin)="onActionBegin($event)" 
                (actionComplete)="onActionComplete($event)"
                (drag)="onItemDrag($event)"
                (eventRendered)="onEventRendered($event)"
                (renderCell)="onRenderCell($event)"
                (navigating)="onNavigating($event)"
                [currentView]="currentView"
                (change)="onChange($event)"
                >
            
                <!-- (renderCell)="onRenderCell($event)" -->
                <e-resources>
                    <e-resource 
                        field='DepartmentID' 
                        title='Regie'
                        name='Departments' 
                        [dataSource]='departmentDataSource'
                        textField='Text' 
                        idField='Id' 
                        colorField='Color' 
                        groupIDField="Id" 
                        [allowMultiple]='allowMultiple'
                        >
                    </e-resource>
                </e-resources>                
                <!-- <ng-template #resourceHeaderTemplate let-data>
                            <div class="template-wrap">
                                <div class="specialist-category">
                                    <div *ngIf="getConsultantStatus(data)">
                                        <img src="https://ej2.syncfusion.com/angular/demos/src/schedule/images/{{getConsultantImageName(data)}}.png" class="specialist-image" />
                                    </div>
                                    <div class="specialist-name">{{getConsultantName(data)}}</div>
                                </div>
                            </div>
                        </ng-template > -->
                <e-views>
                        
                    <e-view option='TimelineDay'  #scheduleObjDay  >
                        <ng-template #eventTemplate let-data  class="event">
                            <div class='template-wrap' style="width: 100%" id="{{data.Id}}" [ngStyle]="data.AzaIsPere ? { 'cursor': 'pointer'} : {}" >
                                <div>
                                    <div class="subject" style="margin-top: 0px;" *ngIf="data.AzaIsPere" id="{{data.Id}}">
                                        <div class="float-right fixed initiales"   ><p>{{data.coordinateurCreate}}</p></div>
                                        <u id="{{data.Id}}">{{data.Name }} </u> 
                                        <!-- <img *ngIf="data.IconUrl" style="height: 20px; width: 20px;" src="{{data.IconUrl}}" /> -->
                                        <div *ngIf="data.Operateur" class="float-right mt-1 operateur">{{data.Operateur}}</div>
                                        <!-- <img style="height: 30px; width: 30px; margin: 0px" src="https://cdn.iconscout.com/icon/free/png-256/avatar-372-456324.png"
                                            class="float-right  fixed mr-1"> -->
                                    </div>
                                    <div *ngIf="!data.AzaIsPere" class="show-user" style="height: 40px; width: 100%; position: absolute; bottom: 0; color: white; display: flex;">
                                     
                                        <!-- <span style="padding-top: 5px; width: 100%; z-index: 2 !important;  font-size: 11px;"   >{{data.Name }} <br> {{data.titreoeuvre}} ep {{data.numepisode}}</span> -->
                                        <span style="padding-top: 5px; width: 100%; z-index: 2 !important;  font-size: 11px;" >{{data.Name }} <br> {{data.libchaine }} </span>
                                       
                                    </div>
                                </div>
                            </div>
                        </ng-template>
                        <!-- <ng-template #tipContent  > <div *ngFor="let data of timelineResourceDataOut"> 
                             {{data.typetravail }} {{data.dureecommerciale }} 
                        </div></ng-template> -->
                    </e-view>
                 
                    <e-view option="TimelineWeek" class="e-icons e-search"  >
                            <ng-template #eventTemplate let-data  class="event">
                                    <div class='template-wrap' style="width: 100%" id="{{data.Id}}" [ngStyle]="data.AzaIsPere ? { 'cursor': 'pointer'} : {}" >
                                        <div>
                                            <div class="subject" style="margin-top: 0px;" *ngIf="data.AzaIsPere" id="{{data.Id}}">
                                                <div class="float-right fixed initiales"><p>{{data.coordinateurCreate}}</p></div>
                                                <u id="{{data.Id}}">{{data.Name }} </u> 
                                                <!-- <img *ngIf="data.IconUrl" style="height: 20px; width: 20px;" src="{{data.IconUrl}}" /> -->
                                                <div *ngIf="data.Operateur" class="float-right mt-1 operateur">{{data.Operateur}}</div>
                                                <!-- <img style="height: 30px; width: 30px; margin: 0px" src="https://cdn.iconscout.com/icon/free/png-256/avatar-372-456324.png"
                                                    class="float-right  fixed mr-1"> -->
                                            </div>
                                            <div *ngIf="!data.AzaIsPere" class="show-user" style="height: 40px; width: 100%; position: absolute; bottom: 0; color: white; display: flex;">
                                                <span style="padding-top: 5px; width: 100%; z-index: 2 !important">{{data.Name }} <br> {{data.libchaine }}  </span>
                                            </div>
                                        </div>
                                    </div>
                                </ng-template>
                    </e-view>
                    <!-- <e-view option="WorkWeek" startHour='08:00' endHour='20:00'  [timeScale]="timeScaleWorkWeek" [readonly]="readonly" >
                        <ng-template #eventTemplate let-data  class="event">
                                <div class='template-wrap' style="width: 100%" id="{{data.Id}}" [ngStyle]="data.AzaIsPere ? { 'cursor': 'pointer'} : {}" >
                                    <div>
                                        <div class="subject" style="margin-top: 10px; font-size: 8px " *ngIf="data.AzaIsPere" id="{{data.Id}}">
                                            <div class="float-right fixed initiales"><p style=" font-size: 8px; text-align: center " >{{data.coordinateurCreate}}</p></div>
                                            <u id="{{data.Id}}"> </u> 
                                        
                                            <div *ngIf="data.Operateur" class="float-right mt-1 operateur"></div>
                                           
                                        </div>
                                        <div *ngIf="!data.AzaIsPere" class="show-user" style="height: 40px; width: 100%; position: absolute; bottom: 0; color: white; display: flex;">
                                            <span style="padding-top: 5px; width: 100%; z-index: 2 !important"> </span>
                                        </div>
                                    </div>
                                </div>
                            </ng-template>
                </e-view> -->
                    <e-view option='TimelineMonth' >
                            <ng-template #eventTemplate let-data  class="event">
                                <div class='template-wrap' style="width: 100%" id="{{data.Id}}" [ngStyle]="data.AzaIsPere ? { 'cursor': 'pointer'} : {}" >
                                    <div>
                                        <div class="subject" style="margin-top: 0px;" *ngIf="data.AzaIsPere" id="{{data.Id}}">
                                            <div class="float-right fixed initiales"><p>{{data.coordinateurCreate}}</p></div>
                                            <u id="{{data.Id}}">{{data.Name }} </u> 
                                            <!-- <img *ngIf="data.IconUrl" style="height: 20px; width: 20px;" src="{{data.IconUrl}}" /> -->
                                            <div *ngIf="data.Operateur" class="float-right mt-1 operateur">{{data.Operateur}}</div>
                                            <!-- <img style="height: 30px; width: 30px; margin: 0px" src="https://cdn.iconscout.com/icon/free/png-256/avatar-372-456324.png"
                                                class="float-right  fixed mr-1"> -->
                                        </div>
                                        <div *ngIf="!data.AzaIsPere" class="show-user" style="height: 40px; width: 100%; position: absolute; bottom: 0; color: white; display: flex;">
                                            <span style="padding-top: 5px; width: 100%; z-index: 2 !important">{{data.Name }} <br> {{data.libchaine }}  </span>
                                        </div>
                                    </div>
                                </div>
                                </ng-template> 

                    </e-view>
                 
                    <e-view option="Agenda"   >
                       
                    </e-view>
                    <!-- <e-view option="MonthAgenda" [readonly]="false">
                   
                    </e-view> -->
                </e-views>
                
            </ejs-schedule>

        </div>
   <!--************************************** tabItem ***********************************************************************-->
   
  <ejs-sidebar id="default-sidebar" #sidebar [type]='type' [target]='target' *ngIf="scheduleObj.currentView =='TimelineDay'  || scheduleObj.currentView =='TimelineWeek' "  >
      
        <ejs-tab id="element" #element  class="content"   >
            <e-tabitems>
  
                <e-tabitem [header]='headerText[0]' id="{{headerText[0]}}" (click)="alert('ok')">
                    <ng-template #content>
                        <div class="treeview-container">
                            <div class="title-container">
                            </div>
                            <div class="input-group">
                                <input type="text" class="form-control" placeholder="Filtrer..." #search (keyup)="onFilter(search.value,0)" >
                                <span class="input-group-addon" id="basic-addon1"><i class="icofont icofont-search"></i></span>
                            </div>

                         
                            <ejs-treeview 
                                #treeObj 
                                [fields]='field' 
                                cssClass='treeview-external-drag'
                                [allowDragAndDrop]='allowDragAndDrop'
                                (nodeDragStop)="onTreeDragStop($event)" 
                                (nodeDragging)="onItemDrag($event, 0)">
                                <ng-template #nodeTemplate="" let-dataWorkOrder="">
                                    <div id="waiting">
                                        <div id="waitdetails" >
                                            <div id="waitlist">{{dataWorkOrder.typetravail}}  </div>
                                            <div id="waitcategory"> {{dataWorkOrder.titreoeuvre}} ep {{dataWorkOrder.numepisode}} <br>
                                                 {{dataWorkOrder.libchaine}}  -  {{dataWorkOrder.dureecommerciale}}
                                        </div>
                                        </div>
                                    </div>
                                </ng-template>
                                
                            </ejs-treeview>




                        </div>
                    </ng-template>
                </e-tabitem>
                <e-tabitem [header]='headerText[1]'>
                    <ng-template #content>
                        <div class="treeview-container">
                            <div class="title-container">
                            </div>
                            <div class="input-group">
                                <input type="text" class="form-control" placeholder="Filtrer..."  #search   [(ngModel)]="search.value"  (keyup)="onFilter(search.value,1)"  >
                                <span class="input-group-addon" id="basic-addon1"><i class="icofont icofont-search"></i></span>
                            </div>
                            <select class="form-control " ([ngModel])="selectedValue"  #select (change)="onSelect(select.value)">
                                <option >Plus de monteurs </option>
                                <option *ngFor="let liste of monteurListe"  >{{liste.Username}}</option>
                            </select>
                            <div>
                                <ejs-treeview *ngIf="selectedValue!='Plus de monteurs'"
                                    id="treeMonteur"
                                    #treeObjMonteur 
                                    [fields]='fieldMonteur' 
                                    cssClass='treeview-external-drag'
                                    [allowDragAndDrop]='allowDragAndDrop'  
                                    (nodeDragStop)="onTreeDragStopMonteur($event)"   
                                    (nodeDragging)="onItemDrag($event, 1)">
                                    <ng-template #nodeTemplate="" #selectedNodes="" let-dataMon="" >
                                      
                                   <div id="waiting" [ngStyle]="{'color': getColor(dataMon.Username, dataMon.codegroupe)}">
                                        <div id="waitdetails" class="monteurs">
                                            <br>
                                            <div id={{dataMon.CodeRessource}} class=" {{dataMon.Username}} ml-2" >{{dataMon.Username}}  </div>
                                        </div>
                                    </div>
                                </ng-template> 
                            </ejs-treeview>
                        </div>
                        <ejs-contextmenu
                        id='contentmenutree'
                         target='#treeMonteur'
                          [items]='menuItems' 
                          (beforeOpen)='beforeopen($event)' 
                          (select)='menuclick($event)'>
                        </ejs-contextmenu>
                        </div>
                    </ng-template>
              
                </e-tabitem> 

            </e-tabitems>
     
        </ejs-tab>

        
    </ejs-sidebar>  
   <div id="head" *ngIf="scheduleObj.currentView =='TimelineDay'  || scheduleObj.currentView =='TimelineWeek' " >
            <button ejs-button id="toggle" #togglebtnslide isToggle="true" (click)="btnClickSlide()" content="" class="btn btn-info float-right regie btn-backlog"> BackLog
                <i *ngIf="!open" class="icofont icofont-navigation-menu"></i>
                <span *ngIf="open == true" ><i class="icofont icofont-close-circled"></i></span>
            </button>
        </div>  
    </div>
</div>  
